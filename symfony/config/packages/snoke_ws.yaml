snoke_ws:
  mode: '%env(resolve:default::WS_MODE)%'
  transport:
    type: '%env(resolve:default::WS_TRANSPORT_TYPE)%'
    http:
      base_url: '%env(resolve:default::WS_GATEWAY_BASE_URL)%'
      publish_path: '/internal/publish'
      timeout_seconds: 5
      auth:
        type: api_key
        header: 'X-Api-Key'
        value: '%env(resolve:default::WS_GATEWAY_API_KEY)%'
    redis_stream:
      dsn: '%env(resolve:default::WS_REDIS_DSN)%'
      stream: '%env(resolve:default::WS_REDIS_STREAM)%'
    rabbitmq:
      dsn: '%env(resolve:default::WS_RABBITMQ_DSN)%'
      exchange: '%env(resolve:default::WS_RABBITMQ_EXCHANGE)%'
      queue: '%env(resolve:default::WS_RABBITMQ_QUEUE)%'
      routing_key: '%env(resolve:default::WS_RABBITMQ_ROUTING_KEY)%'
  presence:
    type: '%env(resolve:default::WS_PRESENCE_TYPE)%'
    http:
      base_url: '%env(resolve:default::WS_GATEWAY_BASE_URL)%'
      list_path: '/internal/connections'
      by_user_path: '/internal/users/{user_id}/connections'
      timeout_seconds: 5
    redis:
      dsn: '%env(resolve:default::WS_REDIS_DSN)%'
      prefix: '%env(resolve:default::WS_REDIS_PREFIX)%'
  events:
    type: '%env(resolve:default::WS_EVENTS_TYPE)%'
    webhook:
      path: '/internal/ws/events'
      enabled: true
    redis_stream:
      dsn: '%env(resolve:default::WS_REDIS_DSN)%'
      stream: '%env(resolve:default::WS_REDIS_EVENTS_STREAM)%'
    rabbitmq:
      dsn: '%env(resolve:default::WS_RABBITMQ_DSN)%'
      exchange: '%env(resolve:default::WS_RABBITMQ_EVENTS_EXCHANGE)%'
      queue: '%env(resolve:default::WS_RABBITMQ_EVENTS_QUEUE)%'
      routing_key: '%env(resolve:default::WS_RABBITMQ_EVENTS_ROUTING_KEY)%'
  tracing:
    enabled: '%env(bool:default:ws_tracing_enabled_default:WS_TRACING_ENABLED)%'
    service_name: '%env(default:ws_tracing_service_name_default:OTEL_SERVICE_NAME)%'
    exporter: '%env(default:ws_tracing_exporter_default:WS_TRACING_EXPORTER)%'
    otlp_endpoint: '%env(default:ws_tracing_otlp_endpoint_default:OTEL_EXPORTER_OTLP_ENDPOINT)%'
    otlp_protocol: '%env(default:ws_tracing_otlp_protocol_default:OTEL_EXPORTER_OTLP_PROTOCOL)%'
    traceparent_field: '%env(default:ws_traceparent_field_default:WS_TRACEPARENT_FIELD)%'
    trace_id_field: '%env(default:ws_trace_id_field_default:WS_TRACE_ID_FIELD)%'
  subjects:
    user_prefix: 'user:'
